
/* Chosen v1.8.7 | (c) 2011-2018 by Harvest | MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md */

(function () { var n, t, o, h, r = {}.hasOwnProperty; function e() { return e.__super__.constructor.apply(this, arguments) } function l(t, e) { var s, i; this.form_field = t, this.options = null != e ? e : {}, this.label_click_handler = (s = this.label_click_handler, i = this, function () { return s.apply(i, arguments) }), l.browser_is_supported() && (this.is_multiple = this.form_field.multiple, this.set_default_text(), this.set_default_values(), this.setup(), this.set_up_html(), this.register_observers(), this.on_ready()) } function s() { this.options_index = 0, this.parsed = [] } (s.prototype.add_node = function (t) { return "OPTGROUP" === t.nodeName.toUpperCase() ? this.add_group(t) : this.add_option(t) }, s.prototype.add_group = function (t) { var e, s, i, o, r, h; for (e = this.parsed.length, this.parsed.push({ array_index: e, group: !0, label: t.label, title: t.title ? t.title : void 0, children: 0, disabled: t.disabled, classes: t.className }), h = [], s = 0, i = (r = t.childNodes).length; s < i; s++)o = r[s], h.push(this.add_option(o, e, t.disabled)); return h }, s.prototype.add_option = function (t, e, s) { if ("OPTION" === t.nodeName.toUpperCase()) return "" !== t.text ? (null != e && (this.parsed[e].children += 1), this.parsed.push({ array_index: this.parsed.length, options_index: this.options_index, value: t.value, text: t.text, html: t.innerHTML, title: t.title ? t.title : void 0, selected: t.selected, disabled: !0 === s ? s : t.disabled, group_array_index: e, group_label: null != e ? this.parsed[e].label : null, classes: t.className, style: t.style.cssText })) : this.parsed.push({ array_index: this.parsed.length, options_index: this.options_index, empty: !0 }), this.options_index += 1 }, h = s).select_to_array = function (t) { var e, s, i, o, r; for (o = new h, s = 0, i = (r = t.childNodes).length; s < i; s++)e = r[s], o.add_node(e); return o.parsed }, l.prototype.set_default_values = function () { return this.click_test_action = (s = this, function (t) { return s.test_active_click(t) }), this.activate_action = (e = this, function (t) { return e.activate_field(t) }), this.active_field = !1, this.mouse_on_container = !1, this.results_showing = !1, this.result_highlighted = null, this.is_rtl = this.options.rtl || /\bchosen-rtl\b/.test(this.form_field.className), this.allow_single_deselect = null != this.options.allow_single_deselect && null != this.form_field.options[0] && "" === this.form_field.options[0].text && this.options.allow_single_deselect, this.disable_search_threshold = this.options.disable_search_threshold || 0, this.disable_search = this.options.disable_search || !1, this.enable_split_word_search = null == this.options.enable_split_word_search || this.options.enable_split_word_search, this.group_search = null == this.options.group_search || this.options.group_search, this.search_contains = this.options.search_contains || !1, this.single_backstroke_delete = null == this.options.single_backstroke_delete || this.options.single_backstroke_delete, this.max_selected_options = this.options.max_selected_options || 1 / 0, this.inherit_select_classes = this.options.inherit_select_classes || !1, this.display_selected_options = null == this.options.display_selected_options || this.options.display_selected_options, this.display_disabled_options = null == this.options.display_disabled_options || this.options.display_disabled_options, this.include_group_label_in_selected = this.options.include_group_label_in_selected || !1, this.max_shown_results = this.options.max_shown_results || Number.POSITIVE_INFINITY, this.case_sensitive_search = this.options.case_sensitive_search || !1, this.hide_results_on_select = null == this.options.hide_results_on_select || this.options.hide_results_on_select; var e, s }, l.prototype.set_default_text = function () { return this.form_field.getAttribute("data-placeholder") ? this.default_text = this.form_field.getAttribute("data-placeholder") : this.is_multiple ? this.default_text = this.options.placeholder_text_multiple || this.options.placeholder_text || l.default_multiple_text : this.default_text = this.options.placeholder_text_single || this.options.placeholder_text || l.default_single_text, this.default_text = this.escape_html(this.default_text), this.results_none_found = this.form_field.getAttribute("data-no_results_text") || this.options.no_results_text || l.default_no_result_text }, l.prototype.choice_label = function (t) { return this.include_group_label_in_selected && null != t.group_label ? "<b class='group-name'>" + this.escape_html(t.group_label) + "</b>" + t.html : t.html }, l.prototype.mouse_enter = function () { return this.mouse_on_container = !0 }, l.prototype.mouse_leave = function () { return this.mouse_on_container = !1 }, l.prototype.input_focus = function (t) { if (this.is_multiple) { if (!this.active_field) return setTimeout((e = this, function () { return e.container_mousedown() }), 50) } else if (!this.active_field) return this.activate_field(); var e }, l.prototype.input_blur = function (t) { if (!this.mouse_on_container) return this.active_field = !1, setTimeout((e = this, function () { return e.blur_test() }), 100); var e }, l.prototype.label_click_handler = function (t) { return this.is_multiple ? this.container_mousedown(t) : this.activate_field() }, l.prototype.results_option_build = function (t) { var e, s, i, o, r, h, n; for (e = "", o = n = 0, r = (h = this.results_data).length; o < r && ("" !== (i = (s = h[o]).group ? this.result_add_group(s) : this.result_add_option(s)) && (n++, e += i), null != t && t.first && (s.selected && this.is_multiple ? this.choice_build(s) : s.selected && !this.is_multiple && this.single_set_selected_text(this.choice_label(s))), !(n >= this.max_shown_results)); o++); return e }, l.prototype.result_add_option = function (t) { var e, s; return t.search_match && this.include_option_in_results(t) ? (e = [], t.disabled || t.selected && this.is_multiple || e.push("active-result"), !t.disabled || t.selected && this.is_multiple || e.push("disabled-result"), t.selected && e.push("result-selected"), null != t.group_array_index && e.push("group-option"), "" !== t.classes && e.push(t.classes), (s = document.createElement("li")).className = e.join(" "), t.style && (s.style.cssText = t.style), s.setAttribute("data-option-array-index", t.array_index), s.innerHTML = t.highlighted_html || t.html, t.title && (s.title = t.title), this.outerHTML(s)) : "" }, l.prototype.result_add_group = function (t) { var e, s; return (t.search_match || t.group_match) && 0 < t.active_options ? ((e = []).push("group-result"), t.classes && e.push(t.classes), (s = document.createElement("li")).className = e.join(" "), s.innerHTML = t.highlighted_html || this.escape_html(t.label), t.title && (s.title = t.title), this.outerHTML(s)) : "" }, l.prototype.results_update_field = function () { if (this.set_default_text(), this.is_multiple || this.results_reset_cleanup(), this.result_clear_highlight(), this.results_build(), this.results_showing) return this.winnow_results() }, l.prototype.reset_single_select_options = function () { var t, e, s, i, o; for (o = [], t = 0, e = (s = this.results_data).length; t < e; t++)(i = s[t]).selected ? o.push(i.selected = !1) : o.push(void 0); return o }, l.prototype.results_toggle = function () { return this.results_showing ? this.results_hide() : this.results_show() }, l.prototype.results_search = function (t) { return this.results_showing ? this.winnow_results() : this.results_show() }, l.prototype.winnow_results = function (t) { var e, s, i, o, r, h, n, l, c, _, a, u, d, p, f; for (this.no_results_clear(), _ = 0, e = (n = this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), c = this.get_search_regex(e), i = 0, o = (l = this.results_data).length; i < o; i++)(r = l[i]).search_match = !1, u = a = null, r.highlighted_html = "", this.include_option_in_results(r) && (r.group && (r.group_match = !1, r.active_options = 0), null != r.group_array_index && this.results_data[r.group_array_index] && (0 === (a = this.results_data[r.group_array_index]).active_options && a.search_match && (_ += 1), a.active_options += 1), f = r.group ? r.label : r.text, r.group && !this.group_search || (u = this.search_string_match(f, c), r.search_match = null != u, r.search_match && !r.group && (_ += 1), r.search_match ? (n.length && (d = u.index, h = f.slice(0, d), s = f.slice(d, d + n.length), p = f.slice(d + n.length), r.highlighted_html = this.escape_html(h) + "<em>" + this.escape_html(s) + "</em>" + this.escape_html(p)), null != a && (a.group_match = !0)) : null != r.group_array_index && this.results_data[r.group_array_index].search_match && (r.search_match = !0))); return this.result_clear_highlight(), _ < 1 && n.length ? (this.update_results_content(""), this.no_results(n)) : (this.update_results_content(this.results_option_build()), null != t && t.skip_highlight ? void 0 : this.winnow_results_set_highlight()) }, l.prototype.get_search_regex = function (t) { var e, s; return s = this.search_contains ? t : "(^|\\s|\\b)" + t + "[^\\s]*", this.enable_split_word_search || this.search_contains || (s = "^" + s), e = this.case_sensitive_search ? "" : "i", new RegExp(s, e) }, l.prototype.search_string_match = function (t, e) { var s; return s = e.exec(t), !this.search_contains && null != s && s[1] && (s.index += 1), s }, l.prototype.choices_count = function () { var t, e, s; if (null != this.selected_option_count) return this.selected_option_count; for (t = this.selected_option_count = 0, e = (s = this.form_field.options).length; t < e; t++)s[t].selected && (this.selected_option_count += 1); return this.selected_option_count }, l.prototype.choices_click = function (t) { if (t.preventDefault(), this.activate_field(), !this.results_showing && !this.is_disabled) return this.results_show() }, l.prototype.keydown_checker = function (t) { var e, s; switch (s = null != (e = t.which) ? e : t.keyCode, this.search_field_scale(), 8 !== s && this.pending_backstroke && this.clear_backstroke(), s) { case 8: this.backstroke_length = this.get_search_field_value().length; break; case 9: this.results_showing && !this.is_multiple && this.result_select(t), this.mouse_on_container = !1; break; case 13: case 27: this.results_showing && t.preventDefault(); break; case 32: this.disable_search && t.preventDefault(); break; case 38: t.preventDefault(), this.keyup_arrow(); break; case 40: t.preventDefault(), this.keydown_arrow() } }, l.prototype.keyup_checker = function (t) { var e, s; switch (s = null != (e = t.which) ? e : t.keyCode, this.search_field_scale(), s) { case 8: this.is_multiple && this.backstroke_length < 1 && 0 < this.choices_count() ? this.keydown_backstroke() : this.pending_backstroke || (this.result_clear_highlight(), this.results_search()); break; case 13: t.preventDefault(), this.results_showing && this.result_select(t); break; case 27: this.results_showing && this.results_hide(); break; case 9: case 16: case 17: case 18: case 38: case 40: case 91: break; default: this.results_search() } }, l.prototype.clipboard_event_checker = function (t) { if (!this.is_disabled) return setTimeout((e = this, function () { return e.results_search() }), 50); var e }, l.prototype.container_width = function () { return null != this.options.width ? this.options.width : this.form_field.offsetWidth + "px" }, l.prototype.include_option_in_results = function (t) { return !(this.is_multiple && !this.display_selected_options && t.selected || !this.display_disabled_options && t.disabled || t.empty) }, l.prototype.search_results_touchstart = function (t) { return this.touch_started = !0, this.search_results_mouseover(t) }, l.prototype.search_results_touchmove = function (t) { return this.touch_started = !1, this.search_results_mouseout(t) }, l.prototype.search_results_touchend = function (t) { if (this.touch_started) return this.search_results_mouseup(t) }, l.prototype.outerHTML = function (t) { var e; return t.outerHTML ? t.outerHTML : ((e = document.createElement("div")).appendChild(t), e.innerHTML) }, l.prototype.get_single_html = function () { return '<a class="chosen-single chosen-default">\n  <span>' + this.default_text + '</span>\n  <div><b></b></div>\n</a>\n<div class="chosen-drop">\n  <div class="chosen-search">\n    <input class="chosen-search-input" type="text" autocomplete="off" />\n  </div>\n  <ul class="chosen-results"></ul>\n</div>' }, l.prototype.get_multi_html = function () { return '<ul class="chosen-choices">\n  <li class="search-field">\n    <input class="chosen-search-input" type="text" autocomplete="off" value="' + this.default_text + '" />\n  </li>\n</ul>\n<div class="chosen-drop">\n  <ul class="chosen-results"></ul>\n</div>' }, l.prototype.get_no_results_html = function (t) { return '<li class="no-results">\n  ' + this.results_none_found + " <span>" + this.escape_html(t) + "</span>\n</li>" }, l.browser_is_supported = function () { return "Microsoft Internet Explorer" === window.navigator.appName ? 8 <= document.documentMode : !(/iP(od|hone)/i.test(window.navigator.userAgent) || /IEMobile/i.test(window.navigator.userAgent) || /Windows Phone/i.test(window.navigator.userAgent) || /BlackBerry/i.test(window.navigator.userAgent) || /BB10/i.test(window.navigator.userAgent) || /Android.*Mobile/i.test(window.navigator.userAgent)) }, l.default_multiple_text = "Select Some Options", l.default_single_text = "Select an Option", l.default_no_result_text = "No results match", t = l, (n = jQuery).fn.extend({ chosen: function (i) { return t.browser_is_supported() ? this.each(function (t) { var e, s; s = (e = n(this)).data("chosen"), "destroy" !== i ? s instanceof o || e.data("chosen", new o(this, i)) : s instanceof o && s.destroy() }) : this } }), function (t, e) { function s() { this.constructor = t } for (var i in e) r.call(e, i) && (t[i] = e[i]); s.prototype = e.prototype, t.prototype = new s, t.__super__ = e.prototype }(e, t), e.prototype.setup = function () { return this.form_field_jq = n(this.form_field), this.current_selectedIndex = this.form_field.selectedIndex }, e.prototype.set_up_html = function () { var t, e; return (t = ["chosen-container"]).push("chosen-container-" + (this.is_multiple ? "multi" : "single")), this.inherit_select_classes && this.form_field.className && t.push(this.form_field.className), this.is_rtl && t.push("chosen-rtl"), e = { class: t.join(" "), title: this.form_field.title }, this.form_field.id.length && (e.id = this.form_field.id.replace(/[^\w]/g, "_") + "_chosen"), this.container = n("<div />", e), this.container.width(this.container_width()), this.is_multiple ? this.container.html(this.get_multi_html()) : this.container.html(this.get_single_html()), this.form_field_jq.hide().after(this.container), this.dropdown = this.container.find("div.chosen-drop").first(), this.search_field = this.container.find("input").first(), this.search_results = this.container.find("ul.chosen-results").first(), this.search_field_scale(), this.search_no_results = this.container.find("li.no-results").first(), this.is_multiple ? (this.search_choices = this.container.find("ul.chosen-choices").first(), this.search_container = this.container.find("li.search-field").first()) : (this.search_container = this.container.find("div.chosen-search").first(), this.selected_item = this.container.find(".chosen-single").first()), this.results_build(), this.set_tab_index(), this.set_label_behavior() }, e.prototype.on_ready = function () { return this.form_field_jq.trigger("chosen:ready", { chosen: this }) }, e.prototype.register_observers = function () { return this.container.on("touchstart.chosen", (C = this, function (t) { C.container_mousedown(t) })), this.container.on("touchend.chosen", (k = this, function (t) { k.container_mouseup(t) })), this.container.on("mousedown.chosen", (x = this, function (t) { x.container_mousedown(t) })), this.container.on("mouseup.chosen", (w = this, function (t) { w.container_mouseup(t) })), this.container.on("mouseenter.chosen", (y = this, function (t) { y.mouse_enter(t) })), this.container.on("mouseleave.chosen", (b = this, function (t) { b.mouse_leave(t) })), this.search_results.on("mouseup.chosen", (v = this, function (t) { v.search_results_mouseup(t) })), this.search_results.on("mouseover.chosen", (m = this, function (t) { m.search_results_mouseover(t) })), this.search_results.on("mouseout.chosen", (g = this, function (t) { g.search_results_mouseout(t) })), this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen", (f = this, function (t) { f.search_results_mousewheel(t) })), this.search_results.on("touchstart.chosen", (p = this, function (t) { p.search_results_touchstart(t) })), this.search_results.on("touchmove.chosen", (d = this, function (t) { d.search_results_touchmove(t) })), this.search_results.on("touchend.chosen", (u = this, function (t) { u.search_results_touchend(t) })), this.form_field_jq.on("chosen:updated.chosen", (a = this, function (t) { a.results_update_field(t) })), this.form_field_jq.on("chosen:activate.chosen", (_ = this, function (t) { _.activate_field(t) })), this.form_field_jq.on("chosen:open.chosen", (c = this, function (t) { c.container_mousedown(t) })), this.form_field_jq.on("chosen:close.chosen", (l = this, function (t) { l.close_field(t) })), this.search_field.on("blur.chosen", (n = this, function (t) { n.input_blur(t) })), this.search_field.on("keyup.chosen", (h = this, function (t) { h.keyup_checker(t) })), this.search_field.on("keydown.chosen", (r = this, function (t) { r.keydown_checker(t) })), this.search_field.on("focus.chosen", (o = this, function (t) { o.input_focus(t) })), this.search_field.on("cut.chosen", (i = this, function (t) { i.clipboard_event_checker(t) })), this.search_field.on("paste.chosen", (s = this, function (t) { s.clipboard_event_checker(t) })), this.is_multiple ? this.search_choices.on("click.chosen", (e = this, function (t) { e.choices_click(t) })) : this.container.on("click.chosen", function (t) { t.preventDefault() }); var e, s, i, o, r, h, n, l, c, _, a, u, d, p, f, g, m, v, b, y, w, x, k, C }, e.prototype.destroy = function () { return n(this.container[0].ownerDocument).off("click.chosen", this.click_test_action), 0 < this.form_field_label.length && this.form_field_label.off("click.chosen"), this.search_field[0].tabIndex && (this.form_field_jq[0].tabIndex = this.search_field[0].tabIndex), this.container.remove(), this.form_field_jq.removeData("chosen"), this.form_field_jq.show() }, e.prototype.search_field_disabled = function () { return this.is_disabled = this.form_field.disabled || this.form_field_jq.parents("fieldset").is(":disabled"), this.container.toggleClass("chosen-disabled", this.is_disabled), this.search_field[0].disabled = this.is_disabled, this.is_multiple || this.selected_item.off("focus.chosen", this.activate_field), this.is_disabled ? this.close_field() : this.is_multiple ? void 0 : this.selected_item.on("focus.chosen", this.activate_field) }, e.prototype.container_mousedown = function (t) { var e; if (!this.is_disabled) return !t || "mousedown" !== (e = t.type) && "touchstart" !== e || this.results_showing || t.preventDefault(), null != t && n(t.target).hasClass("search-choice-close") ? void 0 : (this.active_field ? this.is_multiple || !t || n(t.target)[0] !== this.selected_item[0] && !n(t.target).parents("a.chosen-single").length || (t.preventDefault(), this.results_toggle()) : (this.is_multiple && this.search_field.val(""), n(this.container[0].ownerDocument).on("click.chosen", this.click_test_action), this.results_show()), this.activate_field()) }, e.prototype.container_mouseup = function (t) { if ("ABBR" === t.target.nodeName && !this.is_disabled) return this.results_reset(t) }, e.prototype.search_results_mousewheel = function (t) { var e; if (t.originalEvent && (e = t.originalEvent.deltaY || -t.originalEvent.wheelDelta || t.originalEvent.detail), null != e) return t.preventDefault(), "DOMMouseScroll" === t.type && (e *= 40), this.search_results.scrollTop(e + this.search_results.scrollTop()) }, e.prototype.blur_test = function (t) { if (!this.active_field && this.container.hasClass("chosen-container-active")) return this.close_field() }, e.prototype.close_field = function () { return n(this.container[0].ownerDocument).off("click.chosen", this.click_test_action), this.active_field = !1, this.results_hide(), this.container.removeClass("chosen-container-active"), this.clear_backstroke(), this.show_search_field_default(), this.search_field_scale(), this.search_field.blur() }, e.prototype.activate_field = function () { if (!this.is_disabled) return this.container.addClass("chosen-container-active"), this.active_field = !0, this.search_field.val(this.search_field.val()), this.search_field.focus() }, e.prototype.test_active_click = function (t) { var e; return (e = n(t.target).closest(".chosen-container")).length && this.container[0] === e[0] ? this.active_field = !0 : this.close_field() }, e.prototype.results_build = function () { return this.parsing = !0, this.selected_option_count = null, this.results_data = h.select_to_array(this.form_field), this.is_multiple ? this.search_choices.find("li.search-choice").remove() : (this.single_set_selected_text(), this.disable_search || this.form_field.options.length <= this.disable_search_threshold ? (this.search_field[0].readOnly = !0, this.container.addClass("chosen-container-single-nosearch")) : (this.search_field[0].readOnly = !1, this.container.removeClass("chosen-container-single-nosearch"))), this.update_results_content(this.results_option_build({ first: !0 })), this.search_field_disabled(), this.show_search_field_default(), this.search_field_scale(), this.parsing = !1 }, e.prototype.result_do_highlight = function (t) { var e, s, i, o, r; if (t.length) { if (this.result_clear_highlight(), this.result_highlight = t, this.result_highlight.addClass("highlighted"), o = (i = parseInt(this.search_results.css("maxHeight"), 10)) + (r = this.search_results.scrollTop()), (e = (s = this.result_highlight.position().top + this.search_results.scrollTop()) + this.result_highlight.outerHeight()) >= o) return this.search_results.scrollTop(0 < e - i ? e - i : 0); if (s < r) return this.search_results.scrollTop(s) } }, e.prototype.result_clear_highlight = function () { return this.result_highlight && this.result_highlight.removeClass("highlighted"), this.result_highlight = null }, e.prototype.results_show = function () { return this.is_multiple && this.max_selected_options <= this.choices_count() ? (this.form_field_jq.trigger("chosen:maxselected", { chosen: this }), !1) : (this.container.addClass("chosen-with-drop"), this.results_showing = !0, this.search_field.focus(), this.search_field.val(this.get_search_field_value()), this.winnow_results(), this.form_field_jq.trigger("chosen:showing_dropdown", { chosen: this })) }, e.prototype.update_results_content = function (t) { return this.search_results.html(t) }, e.prototype.results_hide = function () { return this.results_showing && (this.result_clear_highlight(), this.container.removeClass("chosen-with-drop"), this.form_field_jq.trigger("chosen:hiding_dropdown", { chosen: this })), this.results_showing = !1 }, e.prototype.set_tab_index = function (t) { var e; if (this.form_field.tabIndex) return e = this.form_field.tabIndex, this.form_field.tabIndex = -1, this.search_field[0].tabIndex = e }, e.prototype.set_label_behavior = function () { if (this.form_field_label = this.form_field_jq.parents("label"), !this.form_field_label.length && this.form_field.id.length && (this.form_field_label = n("label[for='" + this.form_field.id + "']")), 0 < this.form_field_label.length) return this.form_field_label.on("click.chosen", this.label_click_handler) }, e.prototype.show_search_field_default = function () { return this.is_multiple && this.choices_count() < 1 && !this.active_field ? (this.search_field.val(this.default_text), this.search_field.addClass("default")) : (this.search_field.val(""), this.search_field.removeClass("default")) }, e.prototype.search_results_mouseup = function (t) { var e; if ((e = n(t.target).hasClass("active-result") ? n(t.target) : n(t.target).parents(".active-result").first()).length) return this.result_highlight = e, this.result_select(t), this.search_field.focus() }, e.prototype.search_results_mouseover = function (t) { var e; if (e = n(t.target).hasClass("active-result") ? n(t.target) : n(t.target).parents(".active-result").first()) return this.result_do_highlight(e) }, e.prototype.search_results_mouseout = function (t) { if (n(t.target).hasClass("active-result") || n(t.target).parents(".active-result").first()) return this.result_clear_highlight() }, e.prototype.choice_build = function (t) { var e, s, i; return e = n("<li />", { class: "search-choice" }).html("<span>" + this.choice_label(t) + "</span>"), t.disabled ? e.addClass("search-choice-disabled") : ((s = n("<a />", { class: "search-choice-close", "data-option-array-index": t.array_index })).on("click.chosen", (i = this, function (t) { return i.choice_destroy_link_click(t) })), e.append(s)), this.search_container.before(e) }, e.prototype.choice_destroy_link_click = function (t) { if (t.preventDefault(), t.stopPropagation(), !this.is_disabled) return this.choice_destroy(n(t.target)) }, e.prototype.choice_destroy = function (t) { if (this.result_deselect(t[0].getAttribute("data-option-array-index"))) return this.active_field ? this.search_field.focus() : this.show_search_field_default(), this.is_multiple && 0 < this.choices_count() && this.get_search_field_value().length < 1 && this.results_hide(), t.parents("li").first().remove(), this.search_field_scale() }, e.prototype.results_reset = function () { if (this.reset_single_select_options(), this.form_field.options[0].selected = !0, this.single_set_selected_text(), this.show_search_field_default(), this.results_reset_cleanup(), this.trigger_form_field_change(), this.active_field) return this.results_hide() }, e.prototype.results_reset_cleanup = function () { return this.current_selectedIndex = this.form_field.selectedIndex, this.selected_item.find("abbr").remove() }, e.prototype.result_select = function (t) { var e, s; if (this.result_highlight) return e = this.result_highlight, this.result_clear_highlight(), this.is_multiple && this.max_selected_options <= this.choices_count() ? (this.form_field_jq.trigger("chosen:maxselected", { chosen: this }), !1) : (this.is_multiple ? e.removeClass("active-result") : this.reset_single_select_options(), e.addClass("result-selected"), (s = this.results_data[e[0].getAttribute("data-option-array-index")]).selected = !0, this.form_field.options[s.options_index].selected = !0, this.selected_option_count = null, this.is_multiple ? this.choice_build(s) : this.single_set_selected_text(this.choice_label(s)), this.is_multiple && (!this.hide_results_on_select || t.metaKey || t.ctrlKey) ? t.metaKey || t.ctrlKey ? this.winnow_results({ skip_highlight: !0 }) : (this.search_field.val(""), this.winnow_results()) : (this.results_hide(), this.show_search_field_default()), !this.is_multiple && this.form_field.selectedIndex === this.current_selectedIndex || this.trigger_form_field_change({ selected: this.form_field.options[s.options_index].value }), this.current_selectedIndex = this.form_field.selectedIndex, t.preventDefault(), this.search_field_scale()) }, e.prototype.single_set_selected_text = function (t) { return null == t && (t = this.default_text), t === this.default_text ? this.selected_item.addClass("chosen-default") : (this.single_deselect_control_build(), this.selected_item.removeClass("chosen-default")), this.selected_item.find("span").html(t) }, e.prototype.result_deselect = function (t) { var e; return e = this.results_data[t], !this.form_field.options[e.options_index].disabled && (e.selected = !1, this.form_field.options[e.options_index].selected = !1, this.selected_option_count = null, this.result_clear_highlight(), this.results_showing && this.winnow_results(), this.trigger_form_field_change({ deselected: this.form_field.options[e.options_index].value }), this.search_field_scale(), !0) }, e.prototype.single_deselect_control_build = function () { if (this.allow_single_deselect) return this.selected_item.find("abbr").length || this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'), this.selected_item.addClass("chosen-single-with-deselect") }, e.prototype.get_search_field_value = function () { return this.search_field.val() }, e.prototype.get_search_text = function () { return n.trim(this.get_search_field_value()) }, e.prototype.escape_html = function (t) { return n("<div/>").text(t).html() }, e.prototype.winnow_results_set_highlight = function () { var t, e; if (null != (t = (e = this.is_multiple ? [] : this.search_results.find(".result-selected.active-result")).length ? e.first() : this.search_results.find(".active-result").first())) return this.result_do_highlight(t) }, e.prototype.no_results = function (t) { var e; return e = this.get_no_results_html(t), this.search_results.append(e), this.form_field_jq.trigger("chosen:no_results", { chosen: this }) }, e.prototype.no_results_clear = function () { return this.search_results.find(".no-results").remove() }, e.prototype.keydown_arrow = function () { var t; return this.results_showing && this.result_highlight ? (t = this.result_highlight.nextAll("li.active-result").first()) ? this.result_do_highlight(t) : void 0 : this.results_show() }, e.prototype.keyup_arrow = function () { var t; return this.results_showing || this.is_multiple ? this.result_highlight ? (t = this.result_highlight.prevAll("li.active-result")).length ? this.result_do_highlight(t.first()) : (0 < this.choices_count() && this.results_hide(), this.result_clear_highlight()) : void 0 : this.results_show() }, e.prototype.keydown_backstroke = function () { var t; return this.pending_backstroke ? (this.choice_destroy(this.pending_backstroke.find("a").first()), this.clear_backstroke()) : (t = this.search_container.siblings("li.search-choice").last()).length && !t.hasClass("search-choice-disabled") ? (this.pending_backstroke = t, this.single_backstroke_delete ? this.keydown_backstroke() : this.pending_backstroke.addClass("search-choice-focus")) : void 0 }, e.prototype.clear_backstroke = function () { return this.pending_backstroke && this.pending_backstroke.removeClass("search-choice-focus"), this.pending_backstroke = null }, e.prototype.search_field_scale = function () { var t, e, s, i, o, r, h; if (this.is_multiple) { for (o = { position: "absolute", left: "-1000px", top: "-1000px", display: "none", whiteSpace: "pre" }, e = 0, s = (r = ["fontSize", "fontStyle", "fontWeight", "fontFamily", "lineHeight", "textTransform", "letterSpacing"]).length; e < s; e++)o[i = r[e]] = this.search_field.css(i); return (t = n("<div />").css(o)).text(this.get_search_field_value()), n("body").append(t), h = t.width() + 25, t.remove(), this.container.is(":visible") && (h = Math.min(this.container.outerWidth() - 10, h)), this.search_field.width(h) } }, e.prototype.trigger_form_field_change = function (t) { return this.form_field_jq.trigger("input", t), this.form_field_jq.trigger("change", t) }, o = e }).call(this);



/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Nestable jQuery Plugin - Copyright (c) 2014 Ramon Smit - https://github.com/RamonSmit/Nestable
 */
/*!
 * Nestable jQuery Plugin - Copyright (c) 2014 Ramon Smit - https://github.com/RamonSmit/Nestable
 */

!function (f, u, m, o) { var n = "ontouchstart" in m, g = function () { var t = m.createElement("div"), e = m.documentElement; if (!("pointerEvents" in t.style)) return !1; t.style.pointerEvents = "auto", t.style.pointerEvents = "x", e.appendChild(t); var s = u.getComputedStyle && "auto" === u.getComputedStyle(t, "").pointerEvents; return e.removeChild(t), !!s }(), s = { contentCallback: function (t) { return t.content ? t.content : t.id }, listNodeName: "ol", itemNodeName: "li", handleNodeName: "div", contentNodeName: "span", rootClass: "dd", listClass: "dd-list", itemClass: "dd-item", dragClass: "dd-dragel", handleClass: "dd-handle", contentClass: "dd-content", collapsedClass: "dd-collapsed", placeClass: "dd-placeholder", noDragClass: "dd-nodrag", noChildrenClass: "dd-nochildren", emptyClass: "dd-empty", expandBtnHTML: '<button class="dd-expand" data-action="expand" type="button">Expand</button>', collapseBtnHTML: '<button class="dd-collapse" data-action="collapse" type="button">Collapse</button>', group: 0, maxDepth: 5, threshold: 20, fixedDepth: !1, fixed: !1, includeContent: !1, scroll: !1, scrollSensitivity: 1, scrollSpeed: 5, scrollTriggers: { top: 40, left: 40, right: -40, bottom: -40 }, effect: { animation: "none", time: "slow" }, callback: function (t, e, s) { }, onDragStart: function (t, e, s) { }, beforeDragStop: function (t, e, s) { }, listRenderer: function (t, e) { var s = "<" + e.listNodeName + ' class="' + e.listClass + '">'; return s += t, s += "</" + e.listNodeName + ">" }, itemRenderer: function (t, e, s, i, o) { var n = f.map(t, function (t, e) { return " " + e + '="' + t + '"' }).join(" "), l = "<" + i.itemNodeName + n + ">"; return l += "<" + i.handleNodeName + ' class="' + i.handleClass + '">', l += "<" + i.contentNodeName + ' class="' + i.contentClass + '">', l += e, l += "</" + i.contentNodeName + ">", l += "</" + i.handleNodeName + ">", l += s, l += "</" + i.itemNodeName + ">" } }; function l(t, e) { this.w = f(m), this.el = f(t), (e = e || s).rootClass !== o && "dd" !== e.rootClass && (e.listClass = e.listClass ? e.listClass : e.rootClass + "-list", e.itemClass = e.itemClass ? e.itemClass : e.rootClass + "-item", e.dragClass = e.dragClass ? e.dragClass : e.rootClass + "-dragel", e.handleClass = e.handleClass ? e.handleClass : e.rootClass + "-handle", e.collapsedClass = e.collapsedClass ? e.collapsedClass : e.rootClass + "-collapsed", e.placeClass = e.placeClass ? e.placeClass : e.rootClass + "-placeholder", e.noDragClass = e.noDragClass ? e.noDragClass : e.rootClass + "-nodrag", e.noChildrenClass = e.noChildrenClass ? e.noChildrenClass : e.rootClass + "-nochildren", e.emptyClass = e.emptyClass ? e.emptyClass : e.rootClass + "-empty"), this.options = f.extend({}, s, e), this.options.json !== o && this._build(), this.init() } l.prototype = { init: function () { var o = this; o.reset(), o.el.data("nestable-group", this.options.group), o.placeEl = f('<div class="' + o.options.placeClass + '"/>'); var t = this.el.find(o.options.itemNodeName); f.each(t, function (t, e) { var s = f(e), i = s.parent(); o.setParent(s), i.hasClass(o.options.collapsedClass) && o.collapseItem(i.parent()) }), t.length || this.appendEmptyElement(this.el), o.el.on("click", "button", function (t) { if (!o.dragEl) { var e = f(t.currentTarget), s = e.data("action"), i = e.parents(o.options.itemNodeName).eq(0); "collapse" === s && o.collapseItem(i), "expand" === s && o.expandItem(i) } }); function e(t) { var e = f(t.target); if (!e.hasClass(o.options.handleClass)) { if (e.closest("." + o.options.noDragClass).length) return; e = e.closest("." + o.options.handleClass) } e.length && !o.dragEl && (o.isTouch = /^touch/.test(t.type), o.isTouch && 1 !== t.touches.length || (t.preventDefault(), o.dragStart(t.touches ? t.touches[0] : t))) } function s(t) { o.dragEl && (t.preventDefault(), o.dragMove(t.touches ? t.touches[0] : t)) } function i(t) { o.dragEl && (t.preventDefault(), o.dragStop(t.touches ? t.changedTouches[0] : t)) } n && (o.el[0].addEventListener("touchstart", e, !1), u.addEventListener("touchmove", s, !1), u.addEventListener("touchend", i, !1), u.addEventListener("touchcancel", i, !1)), o.el.on("mousedown", e), o.w.on("mousemove", s), o.w.on("mouseup", i); o.el.bind("destroy-nestable", function () { n && (o.el[0].removeEventListener("touchstart", e, !1), u.removeEventListener("touchmove", s, !1), u.removeEventListener("touchend", i, !1), u.removeEventListener("touchcancel", i, !1)), o.el.off("mousedown", e), o.w.off("mousemove", s), o.w.off("mouseup", i), o.el.off("click"), o.el.unbind("destroy-nestable"), o.el.data("nestable", null) }) }, destroy: function () { this.el.trigger("destroy-nestable") }, add: function (t, e) { var s = "." + this.options.listClass, i = f(this.el).children(s); t.parent_id !== o && (i = i.find('[data-id="' + t.parent_id + '"]'), delete t.parent_id, 0 === i.children(s).length && (i = i.append(this.options.listRenderer("", this.options))), i = i.find(s + ":first"), this.setParent(i.parent())), i.append(this._buildItem(t, this.options)), e && e(i.children('[data-id="' + t.id + '"]:first')) }, replace: function (t) { var e = this._buildItem(t, this.options); this._getItemById(t.id).replaceWith(e) }, removeItem: function (t) { var e = this.options, s = this.el; (t = t || this).remove(); var i = "." + e.listClass + " ." + e.listClass + ":not(:has(*))"; f(s).find(i).remove(); f(s).find('[data-action="expand"], [data-action="collapse"]').each(function () { 0 === f(this).siblings("." + e.listClass).length && f(this).remove() }) }, remove: function (t, e) { var s = this.options, i = this, o = this._getItemById(t), n = s.effect.animation || "fade", l = s.effect.time || "slow"; "fade" === n ? o.fadeOut(l, function () { i.removeItem(o) }) : this.removeItem(o), e && e() }, removeAll: function (t) { var e = this, s = this.options, i = e.el.find(s.listNodeName).first(), o = i.children(s.itemNodeName), n = s.effect.animation || "fade", l = s.effect.time || "slow"; function a() { o.each(function () { e.removeItem(f(this)) }), i.show(), t && t() } "fade" === n ? i.fadeOut(l, a) : a() }, _getItemById: function (t) { return f(this.el).children("." + this.options.listClass).find('[data-id="' + t + '"]') }, _build: function () { var t = this.options.json; "string" == typeof t && (t = JSON.parse(t)), f(this.el).html(this._buildList(t, this.options)) }, _buildList: function (t, s) { if (!t) return ""; var i = "", o = this; return f.each(t, function (t, e) { i += o._buildItem(e, s) }), s.listRenderer(i, s) }, _buildItem: function (t, e) { var s = function (t) { delete (t = f.extend({}, t)).children, delete t.classes, delete t.content; var i = {}; return f.each(t, function (t, e) { var s; "object" == typeof e && (e = JSON.stringify(e)), i["data-" + t] = (s = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#039;" }, e + "".replace(/[&<>"']/g, function (t) { return s[t] })) }), i }(t); s.class = function (t, e) { var s = t.classes || {}; "string" == typeof s && (s = [s]); var i = function (t) { var e = {}; for (var s in t) e[t[s]] = t[s]; return e }(s); return i[e.itemClass] = e.itemClass, f.map(i, function (t) { return t }).join(" ") }(t, e); var i = e.contentCallback(t), o = this._buildList(t.children, e), n = f(e.itemRenderer(s, i, o, e, t)); return this.setParent(n), n[0].outerHTML }, serialize: function () { var n = this, l = function (t) { var o = []; return t.children(n.options.itemNodeName).each(function () { var t = f(this), e = f.extend({}, t.data()), s = t.children(n.options.listNodeName); if (n.options.includeContent) { var i = t.find("." + n.options.contentClass).html(); i && (e.content = i) } s.length && (e.children = l(s)), o.push(e) }), o }; return l(n.el.find(n.options.listNodeName).first()) }, asNestedSet: function () { var a = this.options, r = [], t = 1; return this.el.find(a.listNodeName).first().children(a.itemNodeName).each(function () { t = function t(e, s, i) { var o, n, l = i + 1; 0 < f(e).children(a.listNodeName).children(a.itemNodeName).length && (s++, f(e).children(a.listNodeName).children(a.itemNodeName).each(function () { l = t(f(this), s, l) }), s--); o = f(e).attr("data-id"); d(o) && (o = parseInt(o)); n = f(e).parent(a.listNodeName).parent(a.itemNodeName).attr("data-id") || ""; d(n) && (o = parseInt(n)); o && r.push({ id: o, parent_id: n, depth: s, lft: i, rgt: l }); i = l + 1; return i }(this, 0, t) }), r = r.sort(function (t, e) { return t.lft - e.lft }); function d(t) { return f.isNumeric(t) && Math.floor(t) == t } }, returnOptions: function () { return this.options }, serialise: function () { return this.serialize() }, toHierarchy: function (t) { var o = f.extend({}, this.options, t), e = []; return f(this.element).children(o.items).each(function () { var t = function e(t) { var s = (f(t).attr(o.attribute || "id") || "").match(o.expression || /(.+)[-=_](.+)/); if (s) { var i = { id: s[2] }; return 0 < f(t).children(o.listType).children(o.items).length && (i.children = [], f(t).children(o.listType).children(o.items).each(function () { var t = e(this); i.children.push(t) })), i } }(this); e.push(t) }), e }, toArray: function () { var r = f.extend({}, this.options, this), d = r.startDepthCount || 0, h = [], t = 2; return this.el.find(this.options.listNodeName).first().children(this.options.itemNodeName).each(function () { t = function t(e, s, i) { var o, n, l = i + 1; 0 < e.children(r.options.listNodeName).children(r.options.itemNodeName).length && (s++, e.children(r.options.listNodeName).children(r.options.itemNodeName).each(function () { l = t(f(this), s, l) }), s--); o = e.data().id; if (s === d + 1) n = r.rootID; else { var a = e.parent(r.options.listNodeName).parent(r.options.itemNodeName).data(); n = a.id } o && h.push({ id: o, parent_id: n, depth: s, left: i, right: l }); i = l + 1; return i }(f(this), d + 1, t) }), h = h.sort(function (t, e) { return t.left - e.left }) }, reset: function () { this.mouse = { offsetX: 0, offsetY: 0, startX: 0, startY: 0, lastX: 0, lastY: 0, nowX: 0, nowY: 0, distX: 0, distY: 0, dirAx: 0, dirX: 0, dirY: 0, lastDirX: 0, lastDirY: 0, distAxX: 0, distAxY: 0 }, this.isTouch = !1, this.moving = !1, this.dragEl = null, this.dragRootEl = null, this.dragDepth = 0, this.hasNewRoot = !1, this.pointEl = null }, expandItem: function (t) { t.removeClass(this.options.collapsedClass) }, collapseItem: function (t) { t.children(this.options.listNodeName).length && t.addClass(this.options.collapsedClass) }, expandAll: function () { var t = this; t.el.find(t.options.itemNodeName).each(function () { t.expandItem(f(this)) }) }, collapseAll: function () { var t = this; t.el.find(t.options.itemNodeName).each(function () { t.collapseItem(f(this)) }) }, setParent: function (t) { t.is(this.options.itemNodeName) && t.children(this.options.listNodeName).length && (t.children("[data-action]").remove(), t.prepend(f(this.options.expandBtnHTML)), t.prepend(f(this.options.collapseBtnHTML))) }, unsetParent: function (t) { t.removeClass(this.options.collapsedClass), t.children("[data-action]").remove(), t.children(this.options.listNodeName).remove() }, dragStart: function (t) { var e = this.mouse, s = f(t.target).closest(this.options.itemNodeName), i = { top: t.pageY, left: t.pageX }, o = this.options.onDragStart.call(this, this.el, s, i); if (void 0 === o || !1 !== o) { this.placeEl.css("height", s.height()), e.offsetX = t.pageX - s.offset().left, e.offsetY = t.pageY - s.offset().top, e.startX = e.lastX = t.pageX, e.startY = e.lastY = t.pageY, this.dragRootEl = this.el, this.dragEl = f(m.createElement(this.options.listNodeName)).addClass(this.options.listClass + " " + this.options.dragClass), this.dragEl.css("width", s.outerWidth()), this.setIndexOfItem(s), s.after(this.placeEl), s[0].parentNode.removeChild(s[0]), s.appendTo(this.dragEl), f(m.body).append(this.dragEl), this.dragEl.css({ left: t.pageX - e.offsetX, top: t.pageY - e.offsetY }); var n, l, a = this.dragEl.find(this.options.itemNodeName); for (n = 0; n < a.length; n++)(l = f(a[n]).parents(this.options.listNodeName).length) > this.dragDepth && (this.dragDepth = l) } }, createSubLevel: function (t, e) { var s = f("<" + this.options.listNodeName + "/>").addClass(this.options.listClass); return e && s.append(e), t.append(s), this.setParent(t), s }, setIndexOfItem: function (t, e) { (e = e || []).unshift(t.index()), f(t[0].parentNode)[0] !== this.dragRootEl[0] ? this.setIndexOfItem(f(t[0].parentNode), e) : this.dragEl.data("indexOfItem", e) }, restoreItemAtIndex: function (t, e) { var s, i, o = this.el, n = e.length - 1; for (var l = 0; l < e.length; l++) { if (n === parseInt(l)) return s = o, i = t, void (0 === e[n] ? f(s).prepend(i.clone(!0)) : f(s.children[e[n] - 1]).after(i.clone(!0))); var a = o[0] ? o[0] : o, r = a.children[e[l]]; o = r || this.createSubLevel(f(a)) } }, dragStop: function (t) { var e = { top: t.pageY, left: t.pageX }, s = this.dragEl.data("indexOfItem"), i = this.dragEl.children(this.options.itemNodeName).first(); i[0].parentNode.removeChild(i[0]), this.dragEl.remove(); var o = this.options.beforeDragStop.call(this, this.el, i, this.placeEl.parent()); if (void 0 !== o && !1 === o) { var n = this.placeEl.parent(); return this.placeEl.remove(), n.children().length || this.unsetParent(n.parent()), this.restoreItemAtIndex(i, s), void this.reset() } this.placeEl.replaceWith(i), this.hasNewRoot ? (!0 === this.options.fixed ? this.restoreItemAtIndex(i, s) : this.el.trigger("lostItem"), this.dragRootEl.trigger("gainedItem")) : this.dragRootEl.trigger("change"), this.options.callback.call(this, this.dragRootEl, i, e), this.reset() }, dragMove: function (t) { var e, s, i, o = this.options, n = this.mouse; this.dragEl.css({ left: t.pageX - n.offsetX, top: t.pageY - n.offsetY }), n.lastX = n.nowX, n.lastY = n.nowY, n.nowX = t.pageX, n.nowY = t.pageY, n.distX = n.nowX - n.lastX, n.distY = n.nowY - n.lastY, n.lastDirX = n.dirX, n.lastDirY = n.dirY, n.dirX = 0 === n.distX ? 0 : 0 < n.distX ? 1 : -1, n.dirY = 0 === n.distY ? 0 : 0 < n.distY ? 1 : -1; var l = Math.abs(n.distX) > Math.abs(n.distY) ? 1 : 0; if (!n.moving) return n.dirAx = l, void (n.moving = !0); if (o.scroll) if (void 0 !== u.jQuery.fn.scrollParent) { var a = !1, r = this.el.scrollParent()[0]; r !== m && "HTML" !== r.tagName ? (o.scrollTriggers.bottom + r.offsetHeight - t.pageY < o.scrollSensitivity ? r.scrollTop = a = r.scrollTop + o.scrollSpeed : t.pageY - o.scrollTriggers.top < o.scrollSensitivity && (r.scrollTop = a = r.scrollTop - o.scrollSpeed), o.scrollTriggers.right + r.offsetWidth - t.pageX < o.scrollSensitivity ? r.scrollLeft = a = r.scrollLeft + o.scrollSpeed : t.pageX - o.scrollTriggers.left < o.scrollSensitivity && (r.scrollLeft = a = r.scrollLeft - o.scrollSpeed)) : (t.pageY - f(m).scrollTop() < o.scrollSensitivity ? a = f(m).scrollTop(f(m).scrollTop() - o.scrollSpeed) : f(u).height() - (t.pageY - f(m).scrollTop()) < o.scrollSensitivity && (a = f(m).scrollTop(f(m).scrollTop() + o.scrollSpeed)), t.pageX - f(m).scrollLeft() < o.scrollSensitivity ? a = f(m).scrollLeft(f(m).scrollLeft() - o.scrollSpeed) : f(u).width() - (t.pageX - f(m).scrollLeft()) < o.scrollSensitivity && (a = f(m).scrollLeft(f(m).scrollLeft() + o.scrollSpeed))) } else console.warn("To use scrolling you need to have scrollParent() function, check documentation for more information"); this.scrollTimer && clearTimeout(this.scrollTimer), o.scroll && a && (this.scrollTimer = setTimeout(function () { f(u).trigger(t) }, 10)), n.dirAx !== l ? (n.distAxX = 0, n.distAxY = 0) : (n.distAxX += Math.abs(n.distX), 0 !== n.dirX && n.dirX !== n.lastDirX && (n.distAxX = 0), n.distAxY += Math.abs(n.distY), 0 !== n.dirY && n.dirY !== n.lastDirY && (n.distAxY = 0)), n.dirAx = l, n.dirAx && n.distAxX >= o.threshold && (n.distAxX = 0, i = this.placeEl.prev(o.itemNodeName), 0 < n.distX && i.length && !i.hasClass(o.collapsedClass) && !i.hasClass(o.noChildrenClass) && (e = i.find(o.listNodeName).last(), this.placeEl.parents(o.listNodeName).length + this.dragDepth <= o.maxDepth && (e.length ? (e = i.children(o.listNodeName).last()).append(this.placeEl) : this.createSubLevel(i, this.placeEl))), n.distX < 0 && (this.placeEl.next(o.itemNodeName).length || (s = this.placeEl.parent(), this.placeEl.closest(o.itemNodeName).after(this.placeEl), s.children().length || this.unsetParent(s.parent())))); var d = !1; if (g || (this.dragEl[0].style.visibility = "hidden"), this.pointEl = f(m.elementFromPoint(t.pageX - m.body.scrollLeft, t.pageY - (u.pageYOffset || m.documentElement.scrollTop))), g || (this.dragEl[0].style.visibility = "visible"), this.pointEl.hasClass(o.handleClass) && (this.pointEl = this.pointEl.closest(o.itemNodeName)), this.pointEl.hasClass(o.emptyClass)) d = !0; else if (!this.pointEl.length || !this.pointEl.hasClass(o.itemClass)) return; var h = this.pointEl.closest("." + o.rootClass), c = this.dragRootEl.data("nestable-id") !== h.data("nestable-id"); if (!n.dirAx || c || d) { if (c && o.group !== h.data("nestable-group")) return; if (this.options.fixedDepth && this.dragDepth + 1 !== this.pointEl.parents(o.listNodeName).length) return; if (this.dragDepth - 1 + this.pointEl.parents(o.listNodeName).length > o.maxDepth) return; var p = t.pageY < this.pointEl.offset().top + this.pointEl.height() / 2; s = this.placeEl.parent(), d ? ((e = f(m.createElement(o.listNodeName)).addClass(o.listClass)).append(this.placeEl), this.pointEl.replaceWith(e)) : p ? this.pointEl.before(this.placeEl) : this.pointEl.after(this.placeEl), s.children().length || this.unsetParent(s.parent()), this.dragRootEl.find(o.itemNodeName).length || this.appendEmptyElement(this.dragRootEl), this.dragRootEl = h, c && (this.hasNewRoot = this.el[0] !== this.dragRootEl[0]) } }, appendEmptyElement: function (t) { t.append('<div class="' + this.options.emptyClass + '"/>') } }, f.fn.nestable = function (i) { var o = this, n = arguments; return "Nestable" in u || (u.Nestable = {}, Nestable.counter = 0), this.each(function () { var t = f(this).data("nestable"); if (t) { if ("string" == typeof i && "function" == typeof t[i]) if (1 < n.length) { for (var e = [], s = 1; s < n.length; s++)e.push(n[s]); o = t[i].apply(t, e) } else o = t[i]() } else Nestable.counter++, f(this).data("nestable", new l(this, i)), f(this).data("nestable-id", Nestable.counter) }), o || this } }(window.jQuery || window.Zepto, window, document);


/* Icon Picker by QueryLoop
 * Author: @eliorivero
 * URL: http://queryloop.com/
 * License: GPLv2
 */
!function (e) { "use strict"; var i = { mode: "dialog", closeOnPick: !0, save: "class", size: "", classes: { launcher: "", clear: "remove-times", highlight: "", close: "" }, iconSets: { genericon: "Genericon", fa: "FontAwesome" } }; function s(s, n) { this.element = s, this.settings = e.extend({}, i, n), this._defaults = i, this.init() } s.prototype = { iconSet: "", iconSetName: "", $field: "", init: function () { var i = e(this.element), s = i.data("pickerid"), n = e('<div class="icon-preview icon-preview-' + s + '" />'); this.$field = i.find("input"), this.makePreview(i, s, n), this.makeClear(s, n), this.makeLaunchers(i, s), this.makeDisplay(i) }, makePreview: function (i, s, n) { var a = e("<i />"), t = this.$field.val(); if (n.prependTo(i), a.prependTo(n), "" != t) { n.addClass("icon-preview-on"), a.addClass(t); var o = JSON.parse(e(this.element).attr("abu-save")); e.isArray(o) && (o = e.inArray("class", o) >= 0 ? "class" : e.inArray("label", o) >= 0 ? "label" : e.inArray("code", o) >= 0 ? "code" : "class"), a.addClass(e("[data-" + o + '="' + t + '"]').first().data("class")) } }, makeClear: function (i, s) { var n = this, a = e('<a class="remove-icon ' + n.settings.classes.clear + '" />'); a.hide().prependTo(s), "" != n.$field.val() && a.show(), s.on("click", ".remove-icon", function (i) { i.preventDefault(), n.$field.val("").trigger("input"), s.removeClass("icon-preview-on").find("i").removeClass(), e(this).hide(), e(s).closest(".abu-icon-wrapper").find("input").val("") }) }, makeDisplay: function (i) { var s = this, n = s.settings.classes.close, a = e("body"), t = e('<a href="#" class="icon-picker-close"/>'); "inline" == s.settings.mode ? i.find(".icon-set").append(t).removeClass("dialog").addClass("inline " + s.settings.size).parent().addClass("icon-set-wrap") : "dialog" == s.settings.mode && (e(".icon-set").addClass("dialog " + s.settings.size), e(".icon-picker-overlay").length <= 0 && a.append('<div class="icon-picker-overlay"/>').append(t)), a.on("click", ".icon-picker-close, .icon-picker-overlay", function (n) { n.preventDefault(), s.closePicker(i, e(s.iconSet), s.settings.mode) }).on("mouseenter mouseleave", ".icon-picker-close", function (i) { "mouseenter" == i.type ? e(this).addClass(n) : e(this).removeClass(n) }) }, makeLaunchers: function (i) { var s, n = this, a = i.data("iconsets"); for (s in void 0 === a && (a = n.settings.iconSets), a) a.hasOwnProperty(s) && i.append('<a class="launch-icons ' + n.settings.classes.launcher + '" data-icons="' + s + '">' + a[s] + "</a>"); i.find(".launch-icons").on("click", function (s) { s.preventDefault(); var a = e(this).data("icons"); n.iconSetName = a, n.iconSet = "." + a + "-set", n.iconPick(i), n.showPicker(i, e(n.iconSet), n.settings.mode) }) }, iconPick: function (i) { var s = this, n = "icon-highlight " + s.settings.classes.highlight; e(s.iconSet).on("click", "li", function (n) { n.preventDefault(); var a = e(this), t = JSON.parse(i.attr("abu-save")), o = "string" == e.type(t) && "all" == t, c = a; e(".icon-selected").removeClass("icon-selected"), a.addClass("icon-selected"), e.isArray(t) && (t = e.inArray("class", t) >= 0 ? "class" : e.inArray("label", t) >= 0 ? "label" : e.inArray("code", t) >= 0 ? "code" : "class"), t = o ? "class" : t, s.$field.val(a.data(t)).trigger("input"), i.siblings("input.abu-code-input").val(a.data("code")), i.siblings("input.abu-label-input").val(a.data("label")), s.settings.closeOnPick && s.closePicker(i, a.closest(s.iconSet), s.settings.mode), s.setPreview(a.data("class"), { code: a.data("code"), label: a.data("label") }), e("body").trigger("iconselected.queryloop", c) }), e(s.iconSet).on("mouseenter mouseleave", "li", function (i) { "mouseenter" == i.type ? e(this).addClass(n) : e(this).removeClass(n) }) }, showPicker: function (i, s, n) { "inline" == n ? (e(".icon-set").removeClass("inline-open"), i.find(s).toggleClass("inline-open")) : "dialog" == n && (e(".icon-picker-close, .icon-picker-overlay").addClass("make-visible"), s.addClass("dialog-open")), s.find(".icon-selected").removeClass("icon-selected"); var a = this.$field.val().replace(" ", "."); "" != a && ("class" == this.settings.save ? s.find("." + a).addClass("icon-selected") : s.find('[data-code="' + a + '"]').addClass("icon-selected")), e("body").trigger("iconpickershow.queryloop", n) }, closePicker: function (i, s, n) { e(this.iconSet).off("click", "li"), "inline" == n ? i.find(s).removeClass("inline-open") : "dialog" == n && (e(".icon-picker-close, .icon-picker-overlay").removeClass("make-visible"), s.removeClass("dialog-open")), e("body").trigger("iconpickerclose.queryloop", n) }, setPreview: function (i, s = {}) { var n = e(this.element).find(".icon-preview"); n.addClass("icon-preview-on").find("i").removeClass().addClass(this.iconSetName).attr(s).addClass(i), n.find("a").show() } }, e.fn.qlIconPicker = function (i) { return this.each(function () { e.data(this, "plugin_qlIconPicker") || e.data(this, "plugin_qlIconPicker", new s(this, i)) }), this } }(jQuery);



/*!
 SerializeJSON jQuery plugin.
 https://github.com/marioizquierdo/jquery.serializeJSON
 version 2.9.0 (Jan, 2018)

 Copyright (c) 2012-2018 Mario Izquierdo
 Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/
!function (e) { if ("function" == typeof define && define.amd) define(["jquery"], e); else if ("object" == typeof exports) { var n = require("jquery"); module.exports = e(n) } else e(window.jQuery || window.Zepto || window.$) }(function (f) { "use strict"; f.fn.serializeJSON = function (e) { var r, s, t, n, i, a, u, l, o, p, c, d; return r = f.serializeJSON, s = this, t = r.setupOpts(e), n = s.serializeArray(), r.readCheckboxUncheckedValues(n, t, s), i = {}, f.each(n, function (e, n) { a = n.name, u = n.value, o = r.extractTypeAndNameWithNoType(a), p = o.nameWithNoType, (c = o.type) || (c = r.attrFromInputWithName(s, a, "data-value-type")), r.validateType(a, c, t), "skip" !== c && (d = r.splitInputNameIntoKeysArray(p), l = r.parseValue(u, a, c, t), !l && r.shouldSkipFalsy(s, a, p, c, t) || r.deepSet(i, d, l, t)) }), i }, f.serializeJSON = { defaultOptions: { checkboxUncheckedValue: void 0, parseNumbers: !1, parseBooleans: !1, parseNulls: !1, parseAll: !1, parseWithFunction: null, skipFalsyValuesForTypes: [], skipFalsyValuesForFields: [], customTypes: {}, defaultTypes: { string: function (e) { return String(e) }, number: function (e) { return Number(e) }, boolean: function (e) { return -1 === ["false", "null", "undefined", "", "0"].indexOf(e) }, null: function (e) { return -1 === ["false", "null", "undefined", "", "0"].indexOf(e) ? e : null }, array: function (e) { return JSON.parse(e) }, object: function (e) { return JSON.parse(e) }, auto: function (e) { return f.serializeJSON.parseValue(e, null, null, { parseNumbers: !0, parseBooleans: !0, parseNulls: !0 }) }, skip: null }, useIntKeysAsArrayIndex: !1 }, setupOpts: function (n) { var e, r, s, t, i, a; for (e in a = f.serializeJSON, null == n && (n = {}), s = a.defaultOptions || {}, r = ["checkboxUncheckedValue", "parseNumbers", "parseBooleans", "parseNulls", "parseAll", "parseWithFunction", "skipFalsyValuesForTypes", "skipFalsyValuesForFields", "customTypes", "defaultTypes", "useIntKeysAsArrayIndex"], n) if (-1 === r.indexOf(e)) throw new Error("serializeJSON ERROR: invalid option '" + e + "'. Please use one of " + r.join(", ")); return i = (t = function (e) { return !1 !== n[e] && "" !== n[e] && (n[e] || s[e]) })("parseAll"), { checkboxUncheckedValue: t("checkboxUncheckedValue"), parseNumbers: i || t("parseNumbers"), parseBooleans: i || t("parseBooleans"), parseNulls: i || t("parseNulls"), parseWithFunction: t("parseWithFunction"), skipFalsyValuesForTypes: t("skipFalsyValuesForTypes"), skipFalsyValuesForFields: t("skipFalsyValuesForFields"), typeFunctions: f.extend({}, t("defaultTypes"), t("customTypes")), useIntKeysAsArrayIndex: t("useIntKeysAsArrayIndex") } }, parseValue: function (e, n, r, s) { var t, i; return t = f.serializeJSON, i = e, s.typeFunctions && r && s.typeFunctions[r] ? i = s.typeFunctions[r](e) : s.parseNumbers && t.isNumeric(e) ? i = Number(e) : !s.parseBooleans || "true" !== e && "false" !== e ? s.parseNulls && "null" == e ? i = null : s.typeFunctions && s.typeFunctions.string && (i = s.typeFunctions.string(e)) : i = "true" === e, s.parseWithFunction && !r && (i = s.parseWithFunction(i, n)), i }, isObject: function (e) { return e === Object(e) }, isUndefined: function (e) { return void 0 === e }, isValidArrayIndex: function (e) { return /^[0-9]+$/.test(String(e)) }, isNumeric: function (e) { return 0 <= e - parseFloat(e) }, optionKeys: function (e) { if (Object.keys) return Object.keys(e); var n, r = []; for (n in e) r.push(n); return r }, readCheckboxUncheckedValues: function (r, s, e) { var n, t, i; null == s && (s = {}), f.serializeJSON, n = "input[type=checkbox][name]:not(:checked):not([disabled])", e.find(n).add(e.filter(n)).each(function (e, n) { if (t = f(n), null == (i = t.attr("data-unchecked-value")) && (i = s.checkboxUncheckedValue), null != i) { if (n.name && -1 !== n.name.indexOf("[][")) throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '" + n.name + "'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67"); r.push({ name: n.name, value: i }) } }) }, extractTypeAndNameWithNoType: function (e) { var n; return (n = e.match(/(.*):([^:]+)$/)) ? { nameWithNoType: n[1], type: n[2] } : { nameWithNoType: e, type: null } }, shouldSkipFalsy: function (e, n, r, s, t) { var i = f.serializeJSON.attrFromInputWithName(e, n, "data-skip-falsy"); if (null != i) return "false" !== i; var a = t.skipFalsyValuesForFields; if (a && (-1 !== a.indexOf(r) || -1 !== a.indexOf(n))) return !0; var u = t.skipFalsyValuesForTypes; return null == s && (s = "string"), !(!u || -1 === u.indexOf(s)) }, attrFromInputWithName: function (e, n, r) { var s; return s = '[name="' + n.replace(/(:|\.|\[|\]|\s)/g, "\\$1") + '"]', e.find(s).add(e.filter(s)).attr(r) }, validateType: function (e, n, r) { var s, t; if (s = (t = f.serializeJSON).optionKeys(r ? r.typeFunctions : t.defaultOptions.defaultTypes), n && -1 === s.indexOf(n)) throw new Error("serializeJSON ERROR: Invalid type " + n + " found in input name '" + e + "', please use one of " + s.join(", ")); return !0 }, splitInputNameIntoKeysArray: function (e) { var n; return f.serializeJSON, n = e.split("["), "" === (n = f.map(n, function (e) { return e.replace(/\]/g, "") }))[0] && n.shift(), n }, deepSet: function (e, n, r, s) { var t, i, a, u, l, o; if (null == s && (s = {}), (o = f.serializeJSON).isUndefined(e)) throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined"); if (!n || 0 === n.length) throw new Error("ArgumentError: param 'keys' expected to be an array with least one element"); t = n[0], 1 === n.length ? "" === t ? e.push(r) : e[t] = r : (i = n[1], "" === t && (l = e[u = e.length - 1], t = o.isObject(l) && (o.isUndefined(l[i]) || 2 < n.length) ? u : 1 + u), "" === i || s.useIntKeysAsArrayIndex && o.isValidArrayIndex(i) ? !o.isUndefined(e[t]) && f.isArray(e[t]) || (e[t] = []) : !o.isUndefined(e[t]) && o.isObject(e[t]) || (e[t] = {}), a = n.slice(1), o.deepSet(e[t], a, r, s)) } } });



/* Toast */
/* !Don't remove this!
 * Material Toast plugin styles
 *
 * Author: Dionlee Uy
 * Email: dionleeuy@gmail.com
 */
!function (t, e) { "function" == typeof define && define.amd ? define("mdtoast", [], e(t)) : "object" == typeof exports ? module.exports = e(t) : t.mdtoast = e(t) }("undefined" != typeof global ? global : this.window || this.global, function (t) { "use strict"; function s(t, e, o, n) { e.appendChild(t.docFrag), setTimeout(function () { t.toast.classList.remove("mdt--load"), setTimeout(function () { o && o.shown && o.shown.apply(t), n && "function" == typeof n && n.apply(t) }, t.animateTime), t.options.interaction ? t.options.interactionTimeout && (t.timeout = setTimeout(function () { t.hide() }, t.options.interactionTimeout)) : t.options.duration && (t.timeout = setTimeout(function () { t.hide() }, t.options.duration)), e.classList.add(i), t.options.modal && e.classList.add(a) }, 15) } var c = !!document.querySelector && !!t.addEventListener, o = { init: !1, duration: 5e3, type: "default", modal: !1, interaction: !1, interactionTimeout: null, actionText: "OK", action: function () { this.hide() }, callbacks: {} }, i = "mdtoast--open", a = "mdtoast--modal", n = function () { if (!(this instanceof n)) return n.apply(Object.create(n.prototype), arguments); var t = this, e = arguments; return t.animateTime = 230, t.message = e[0], t.options = function (t) { var o = {}, n = !1, e = 0, i = arguments.length; "[object Boolean]" === Object.prototype.toString.call(t) && (n = t, e++); for (var a = function (t) { for (var e in t) Object.prototype.hasOwnProperty.call(t, e) && (n && "[object Object]" === Object.prototype.toString.call(t[e]) ? o[e] = extend(!0, o[e], t[e]) : o[e] = t[e]) }; e < i; e++) { a(arguments[e]) } return o }(o, e[1]), t.timeout = null, t.options.init || d.apply(t), t }, d = function () { if (c) { var t, e, o = this, n = o.options, i = (n.callbacks, function (t, e, o, n) { var i = document.createElement(t); return i.className = e, void 0 !== o && (i[n ? "innerHTML" : "innerText"] = o), i }), a = function (t) { t.target.matches(".mdt-action") && ("click" === t.type || "keypress" === t.type && 13 === t.keyCode) && n.action && n.action.apply(o, [t]) }; o.docFrag = document.createDocumentFragment(), o.toast = i("div", "mdtoast mdt--load"), o.toast.tabIndex = 0, o.docFrag.appendChild(o.toast), "default" !== n.type && o.toast.classList.add("mdt--" + n.type), t = i("div", "mdt-message", o.message, !0), o.toast.appendChild(t), e = i("span", "mdt-action"), n.interaction && (e.innerText = n.actionText, e.tabIndex = 0, o.toast.classList.add("mdt--interactive"), o.toast.appendChild(e)), o.toast.addEventListener("click", a, !1), o.toast.addEventListener("keypress", a, !1), (o.toast.mdtoast = o).options.init || o.show() } }; return Object.defineProperties(n, { INFO: { value: "info" }, ERROR: { value: "error" }, WARNING: { value: "warning" }, SUCCESS: { value: "success" } }), n.prototype.show = function (t) { var e = this, o = e.options.callbacks, n = document.getElementsByClassName("mdtoast"), i = document.body; if (!i.contains(e.toast)) if (e.options.init && d.apply(this), 0 < n.length) for (var a = n.length - 1; 0 <= a; a--)n[a].mdtoast.hide(function () { a < 0 && s(e, i, o, t) }); else s(e, i, o, t) }, n.prototype.hide = function (t) { var e = this, o = e.options.callbacks, n = document.body; clearTimeout(e.timeout), e.toast.classList.add("mdt--load"), n.classList.remove(i), n.classList.remove(a), setTimeout(function () { n.removeChild(e.toast), o && o.hidden && o.hidden.apply(e), t && "function" == typeof t && t.apply(e) }, e.animateTime) }, n });



/* !Don't remove this!
 * duDialog v1.0 plugin
 * https://github.com/dmuy/duDialog
 *
 * Author: Dionlee Uy
 * Email: dionleeuy@gmail.com
 */
!function (e, t) { "function" == typeof define && define.amd ? define("duDialog", [], t(e)) : "object" == typeof exports ? module.exports = t(e) : e.duDialog = t(e) }("undefined" != typeof global ? global : this.window || this.global, function (e) { "use strict"; function E(e, t) { return !!e && (void 0 !== e[0] && 0 < e.filter(function (e) { return e === t }).length) } function S(e, t) { Array.isArray(e) ? e.forEach(function (e) { t.appendChild(e) }) : t.appendChild(e) } var A = !!document.querySelector && !!e.addEventListener, a = { id: null, init: !1, okText: "Ok", cancelText: "Cancel", selection: !1, multiple: !1, allowSearch: !1, selectedValue: null, valueField: "value", textField: "item", callbacks: null }, n = function () { var l = {}, c = !1, e = 0, t = arguments.length; "[object Boolean]" === Object.prototype.toString.call(arguments[0]) && (c = arguments[0], e++); for (var o = function (e) { for (var t in e) Object.prototype.hasOwnProperty.call(e, t) && (c && "[object Object]" === Object.prototype.toString.call(e[t]) ? l[t] = n(!0, l[t], e[t]) : l[t] = e[t]) }; e < t; e++) { o(arguments[e]) } return l }, C = function () { if (!(this instanceof C)) return C.apply(Object.create(C.prototype), arguments); var e = this, t = arguments, l = typeof t[0], c = typeof t[1], o = typeof t[2]; e.config = n(a, "object" == o ? t[2] : t[3]); var i = e.config.selection ? e.config.multiple ? C.OK_CANCEL : C.NO_ACTION : C.DEFAULT; if (e.type = "object" == o ? i : t[2] || i, "undefined" == l || "string" != l && null !== t[0]) throw new Error("Dialog title is missing or incorrect format."); if (("undefined" == c || "string" != c) && !e.config.selection || !Array.isArray(t[1]) && e.config.selection) throw new Error("Dialog message is missing or incorrect format."); return e.title = t[0], e.message = t[1], e.cache = {}, e.config.init || r.apply(e), e }, r = function () { if (A) { var e, t, f, l, p = this, m = p.config.callbacks, c = function (e, t, l, c) { var o, i = document.createElement(e); return void 0 !== l && (i[c ? "innerHTML" : "innerText"] = l), void 0 !== t && (o = function (e, t) { for (var l in e) { var c = e[l]; "object" == typeof c && null !== c && void 0 === c.dataset && void 0 === c[0] ? o(c, t[l]) : l in t && (null !== c ? t[l] = c : null !== c ? t.setAttribute(l, c) : t.removeAttribute(l)) } })(t, i), i }, o = function (e) { if ("click" === e.type && (e.target.matches(".du-dialog") && (p.type === C.NO_ACTION ? p.hide() : (p.dialog.classList.add("dlg--pulse"), setTimeout(function () { p.dialog.classList.remove("dlg--pulse") }, 200))), e.target.matches(".dlg-select-item") && e.target.querySelector(".dlg-select-lbl").click(), e.target.matches(".dlg-action"))) { if (e.target.matches(".ok-action")) if (p.config.selection && p.config.multiple) { for (var t = f.querySelectorAll(".dlg-select-checkbox:checked"), l = [], c = [], o = 0; o < t.length; o++) { var i = p.cache[t[o].id]; c.push(i), l.push("string" == typeof i ? t[o].value : i[p.config.valueField]) } p.config.selectedValue = l, m.itemSelect.apply({ value: l }, [e, c]), p.hide() } else m && m.okClick ? m.okClick.apply(p, e) : p.hide(); e.target.matches(".cancel-action") && (m && m.cancelClick ? m.cancelClick.apply(p, e) : p.hide()) } if ("change" === e.type && e.target.matches(".dlg-select-radio")) { var a = e.target; if (a.checked && m && m.itemSelect) { i = p.cache[a.id]; p.config.selectedValue = "string" == typeof i ? a.value : i[p.config.valueField], m.itemSelect.apply(a, [e, i]), p.hide() } } if ("scroll" === e.type && e.target.matches(".dlg-content") && e.target.classList[5 < e.target.scrollTop ? "add" : "remove"]("content--scrolled"), "keyup" === e.type && e.target.matches(".dlg-search")) { var n = e.target.value, r = f.querySelectorAll(".dlg-select-item"); for (o = 0; o < r.length; o++) { var s, d = r[o], g = d.querySelector(p.config.multiple ? ".dlg-select-checkbox" : ".dlg-select-radio"), u = "string" == typeof (i = p.cache[g.id]) ? i : i[p.config.textField]; s = m && m.onSearch ? m.onSearch.call(p, i, n) : 0 <= u.toLowerCase().indexOf(n.toLowerCase()), d.classList[s ? "remove" : "add"]("item--nomatch") } } }; if (p.docFrag = document.createDocumentFragment(), p.dialog = c("div", { className: "du-dialog", id: p.config.id }), S(p.dialog, p.docFrag), e = c("div", { className: "dlg-wrapper", tabIndex: 0 }), S(e, p.dialog), p.title ? (t = c("div", { className: "dlg-header" }, p.title), S(t, e)) : p.dialog.classList.add("dlg--no-title"), f = c("div", { className: "dlg-content" }), p.config.selection) { p.config.allowSearch && S(c("input", { className: "dlg-search", placeholder: "Search..." }), t); for (var i = 0; i < p.message.length; i++) { var a = p.message[i], n = typeof a, r = "string" == n ? a : a[p.config.valueField], s = "string" == n ? a : a[p.config.textField], d = (p.config.multiple ? "dlg-cb" : "dlg-radio") + r.toString().replace(/\s+/g, ""), g = c("div", { className: "dlg-select-item" }), u = c("input", { className: p.config.multiple ? "dlg-select-checkbox" : "dlg-select-radio", id: d, name: "dlg-selection", type: p.config.multiple ? "checkbox" : "radio", value: r, checked: p.config.multiple ? p.config.selectedValue && E(p.config.selectedValue, r) : p.config.selectedValue === r }), h = c("label", { className: "dlg-select-lbl", htmlFor: d }, m && m.itemRender ? m.itemRender.call(p, a) : '<span class="select-item">' + s + "</span>", !0); p.cache[d] = a, S([u, h], g), S(g, f) } } else f.innerHTML = p.message; switch (S(f, e), p.type !== C.NO_ACTION && (l = c("div", { className: "dlg-actions" }), S(l, e)), p.type) { case C.OK_CANCEL: S([c("button", { className: "dlg-action cancel-action", tabIndex: 2 }, p.config.cancelText), c("button", { className: "dlg-action ok-action", tabIndex: 1 }, p.config.okText)], l); break; case C.DEFAULT: S(c("button", { className: "dlg-action ok-action", tabIndex: 1 }, p.config.okText), l) }b = f, k = "scroll", N = o, Array.isArray(b) ? b.forEach(function (e) { e.addEventListener(k, N, !1) }) : b.addEventListener(k, N, !1), y = p.dialog, v = o, ["click", "change", "keyup"].forEach(function (e) { y.addEventListener(e, v, !1) }), p.config.init || p.show() } var y, v, b, k, N }; return Object.defineProperties(C, { DEFAULT: { value: 1 }, OK_CANCEL: { value: 2 }, NO_ACTION: { value: 3 } }), C.prototype.show = function () { var a = this; a.config.init && r.apply(this), S(a.docFrag, document.body), setTimeout(function () { if (a.dialog.classList.add("dlg--open"), a.config.selection && !a.config.multiple) { var e = a.dialog.querySelector(".dlg-content"), t = e.querySelector(".dlg-select-radio:checked"); if (t) { for (var l = Array.prototype.slice.call(e.childNodes), c = 0, o = 0; o < l.indexOf(t.parentNode); o++) { c += l[o].offsetHeight } e.scrollTop = c } } var i = document.getElementsByClassName("dlg-action"); i && i.length ? i[i.length - 1].focus() : a.dialog.getElementsByClassName("dlg-wrapper")[0].focus() }, 15) }, C.prototype.hide = function () { var e = this; e.dialog.classList.add("dlg--closing"), setTimeout(function () { document.body.removeChild(e.dialog) }, 200) }, C }), Element.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function (e) { for (var t = (this.document || this.ownerDocument).querySelectorAll(e), l = t.length; 0 <= --l && t.item(l) !== this;); return -1 < l });